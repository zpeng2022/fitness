<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yiie.common.mapper.GymOrderDetailMapper">
    <resultMap id="BaseResultMap" type="com.yiie.entity.GymOrderDetail">
        <id column="orderDetailId" jdbcType="VARCHAR" property="orderDetailId" />
        <result column="gymId" jdbcType="VARCHAR" property="gymId" />
        <result column="deptId" jdbcType="VARCHAR" property="deptId" />
        <result column="orderId" jdbcType="VARCHAR" property="orderId" />
        <result column="customerName" jdbcType="VARCHAR" property="customerName" />
        <result column="customerPhone" jdbcType="VARCHAR" property="customerPhone" />
        <result column="customerIdentityCard" jdbcType="VARCHAR" property="customerIdentityCard" />
        <result column="isBlackUser" jdbcType="TINYINT" property="isBlackUser" />
        <result column="exerciseType" jdbcType="VARCHAR" property="exerciseType" />
        <result column="orderStartTime" jdbcType="VARCHAR" property="orderStartTime" />
        <result column="orderEndTime" jdbcType="VARCHAR" property="orderEndTime" />
        <result column="createTime" jdbcType="VARCHAR" property="createTime" />
        <result column="deleted" jdbcType="TINYINT" property="deleted" />
    </resultMap>

    <sql id="Base_Column_List">
        orderDetailId, gymId, deptId, orderId, customerName, customerPhone, customerIdentityCard, isBlackUser, exerciseType, orderStartTime, orderEndTime, createTime, deleted
    </sql>

    <select id="getAllGymOrderDetailByDeptID" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"></include>
        FROM gym_orderdetail
        AND deptId=#{deptId}
        AND deleted=1
    </select>

    <select id="getAllGymOrderDetailByGymID" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"></include>
        FROM gym_orderdetail
        AND gymId=#{gymId}
        AND deleted=1
    </select>

    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from gym_orderdetail
        where orderDetailId = #{orderDetailId,jdbcType=VARCHAR}
    </select>

    <select id="selectByIdentityCardAndTimeAndDeptId" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from gym_orderdetail
        where customerIdentityCard = #{customerIdentityCard}
        AND date(orderStartTime) = date(now())
        AND deptId = #{deptId}
        AND deleted = 1
    </select>

    <insert id="insertSelective" parameterType="com.yiie.entity.GymOrderDetail">
        insert into gym_orderdetail
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="orderId != null">
                orderDetailId,
            </if>
            <if test="gymId != null">
                gymId,
            </if>
            <if test="deptId != null">
                deptId,
            </if>
            <if test="orderId != null">
                orderId,
            </if>
            <if test="customerName != null">
                customerName,
            </if>
            <if test="customerPhone != null">
                customerPhone,
            </if>
            <if test="customerIdentityCard != null">
                customerIdentityCard,
            </if>
            <if test="isBlackUser != null">
                isBlackUser,
            </if>
            <if test="exerciseType != null">
                exerciseType,
            </if>
            <if test="orderStatus != null">
                orderStatus,
            </if>
            <if test="orderStartTime != null">
                orderStartTime,
            </if>
            <if test="orderEndTime != null">
                orderEndTime,
            </if>
            <if test="createTime != null">
                createTime,
            </if>
            <if test="deleted != null">
                deleted,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="orderDetailId != null">
                #{orderDetailId,jdbcType=VARCHAR},
            </if>
            <if test="gymId != null">
                #{gymId,jdbcType=VARCHAR},
            </if>
            <if test="deptId != null">
                #{deptId,jdbcType=VARCHAR},
            </if>
            <if test="orderId != null">
                #{orderId,jdbcType=VARCHAR},
            </if>
            <if test="customerName != null">
                #{customerName,jdbcType=VARCHAR},
            </if>
            <if test="customerPhone != null">
                #{customerPhone,jdbcType=VARCHAR},
            </if>
            <if test="customerIdentityCard != null">
                #{customerIdentityCard,jdbcType=VARCHAR},
            </if>
            <if test="isBlackUser != null">
                #{isBlackUser,jdbcType=TINYINT},
            </if>
            <if test="exerciseType != null">
                #{exerciseType,jdbcType=VARCHAR},
            </if>
            <if test="orderStartTime != null">
                #{orderStartTime,jdbcType=VARCHAR},
            </if>
            <if test="orderEndTime != null">
                #{orderEndTime,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=VARCHAR},
            </if>
            <if test="deleted != null">
                #{deleted,jdbcType=TINYINT},
            </if>
        </trim>
    </insert>

    <update id="updateByPrimaryKeySelective" parameterType="com.yiie.entity.GymOrderDetail">
        update gym_orderdetail
        <set>
            <if test="orderDetailId != null">
                orderDetailId = #{orderDetailId,jdbcType=VARCHAR},
            </if>
            <if test="gymId != null">
                gymId = #{gymId,jdbcType=VARCHAR},
            </if>
            <if test="deptId != null">
                deptId = #{deptId,jdbcType=VARCHAR},
            </if>
            <if test="orderId != null">
                orderId = #{orderId,jdbcType=VARCHAR},
            </if>
            <if test="customerName != null">
                customerName = #{customerName,jdbcType=VARCHAR},
            </if>
            <if test="customerPhone != null">
                customerPhone = #{customerPhone,jdbcType=VARCHAR},
            </if>
            <if test="customerIdentityCard != null">
                customerIdentityCard = #{customerIdentityCard,jdbcType=VARCHAR},
            </if>
            <if test="isBlackUser != null">
                isBlackUser = #{isBlackUser,jdbcType=TINYINT},
            </if>
            <if test="exerciseType != null">
                exerciseType = #{exerciseType,jdbcType=VARCHAR},
            </if>
            <if test="orderStartTime != null">
                orderStartTime = #{orderStartTime,jdbcType=VARCHAR},
            </if>
            <if test="orderEndTime != null">
                orderEndTime = #{orderEndTime,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                createTime = #{createTime,jdbcType=VARCHAR},
            </if>
            <if test="deleted != null">
                deleted = #{deleted,jdbcType=TINYINT},
            </if>
        </set>
        where orderDetailId = #{orderDetailId,jdbcType=VARCHAR}
    </update>

    <update id="deletedGymOrderDetails" parameterType="com.yiie.entity.GymOrderDetail">
        update orderDetailId
        <set>
            deleted = 0
        </set>
        where orderId in
        <foreach collection="list" open="(" close=")" separator="," item="item">
            #{item}
        </foreach>
    </update>
</mapper>